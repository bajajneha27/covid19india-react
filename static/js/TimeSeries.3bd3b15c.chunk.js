(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[15],{264:function(t,e,a){"use strict";a.r(e);var n=a(79),c=a(15),r=a(225),i=a(7),o=a.n(i),s=function(t){var e=Object(i.useState)(null),a=Object(n.a)(e,2),c=a[0],o=a[1];return Object(i.useEffect)((function(){var e=t.current,a=new r.a((function(t,e){t.forEach((function(t,e){o(t.contentRect)}))}));return a.observe(e),function(){a.unobserve(e)}}),[t]),c},l=a(20),u=a(87),f=a.n(u),b=a(245),j=a(246),m=a(189),d=a(123),O=a(146),h=a(253),v=a(257),x=a(252),k=a(261),p=a(243),y=a(258),g=a(251),E=(a(121),a(21)),M=a(47),N=a(83),A=a.n(N),w=a(263);e.default=o.a.memo((function(t){var e=t.timeseries,a=t.dates,r=t.chartType,u=t.isUniform,N=t.isLog,A=t.timelineDate,T=Object(w.a)().t,R=Object(i.useRef)([]),C=Object(i.useRef)(),L=s(C),S=Object(i.useState)(A),U=Object(n.a)(S,2),Y=U[0],F=U[1];Object(i.useEffect)((function(){var t=a.length,n=L||C.current.getBoundingClientRect(),i=n.width,o=n.height,s=15,f=25,E=i-35,M=o-25,A=Object(h.a)().clamp(!0).domain([Object(l.k)(a[0]),Object(l.k)(a[t-1])]).range([f,E]),w=i<480?4:7,T=function(t){return t.attr("class","x-axis").call(Object(d.a)(A).ticks(w).tickFormat((function(t){return Object(l.c)(t,"dd MMM")})))},S=function(t,e){t.attr("class","x-axis2").call(Object(d.a)(A).tickValues([]).tickSize(0)).select(".domain").style("transform","translateY(".concat(e(0),"px)")),e(0)!==M?t.select(".domain").attr("opacity",.4):t.select(".domain").attr("opacity",0)},U=function(t,e){return t.attr("class","y-axis").call(Object(d.b)(e).ticks(4,"0~s").tickPadding(4))},Y=Object(b.a)(a,(function(t){return Object(l.i)(e[t],r,"active")})),J=Object(j.a)(a,(function(t){return Math.max(Object(l.i)(e[t],r,"confirmed"),Object(l.i)(e[t],r,"recovered"),Object(l.i)(e[t],r,"deceased"))})),P=Object(v.a)().clamp(!0).domain([Y,Math.max(1,1.2*J)]).nice(4).range([M,s]),z=Object(x.a)().clamp(!0).domain([Math.max(1,Y),Math.max(10,1.2*J)]).nice(4).range([M,s]);function B(){var t=Object(k.a)(this)[0],e=A.invert(t),n=(0,Object(m.a)((function(t){return Object(l.k)(t)})).left)(a,e,1),c=a[n-1],r=a[n];F(e-Object(l.k)(c)<Object(l.k)(r)-e?c:r)}function D(){F(a[t-1])}R.current.forEach((function(n,i){var o=Object(p.a)(n),f=o.transition().duration(c.b),m=c.n[i],d=function(t){return u&&"total"===r&&N&&"tested"!==t?z:u&&"tested"!==t?P:"total"===r&&N?Object(x.a)().clamp(!0).domain([Math.max(1,Object(b.a)(a,(function(a){return Object(l.i)(e[a],r,t)}))),Math.max(10,1.2*Object(j.a)(a,(function(a){return Object(l.i)(e[a],r,t)})))]).nice(4).range([M,s]):Object(v.a)().clamp(!0).domain([1.1*Math.min(0,Object(b.a)(a,(function(a){return Object(l.i)(e[a],r,t)}))),Math.max(1,1.2*Object(j.a)(a,(function(a){return Object(l.i)(e[a],r,t)})))]).nice(4).range([M,s])}(m),h=c.a[m];if(o.select(".x-axis").style("transform","translateY(".concat(M,"px)")).transition(f).call(T),o.select(".x-axis2").transition(f).call(S,d),o.select(".y-axis").style("transform","translateX(".concat(E,"px)")).transition(f).call(U,d),o.selectAll("circle").data(a,(function(t){return t})).join((function(t){return t.append("circle").attr("fill",h).attr("stroke",h).attr("r",2).attr("cy",M).attr("cx",(function(t){return A(Object(l.k)(t))}))})).transition(f).attr("cx",(function(t){return A(Object(l.k)(t))})).attr("cy",(function(t){return d(Object(l.i)(e[t],r,m))})),"total"===r){o.selectAll(".stem").transition(f).attr("y1",d(0)).attr("y2",d(0)).remove();var k,w=Object(y.a)().curve(g.a).x((function(t){return A(Object(l.k)(t))})).y((function(t){return d(Object(l.i)(e[t],r,m))}));o.selectAll(".trend").data(t?[a]:[]).join((function(t){return t.append("path").attr("class","trend").attr("fill","none").attr("stroke",h+"50").attr("stroke-width",4).attr("d",w).attr("stroke-dasharray",(function(){return k=this.getTotalLength()})).call((function(t){return t.attr("stroke-dashoffset",k).transition(f).attr("stroke-dashoffset",0)}))}),(function(t){return t.attr("stroke-dasharray",null).transition(f).attrTween("d",(function(t){var e=Object(p.a)(this).attr("d"),a=w(t);return Object(O.interpolatePath)(e,a)}))}))}else o.selectAll(".trend").remove(),o.selectAll(".stem").data(a,(function(t){return t})).join((function(t){return t.append("line").attr("class","stem").style("stroke",h+"99").style("stroke-width",4).attr("x1",(function(t){return A(Object(l.k)(t))})).attr("y1",M).attr("x2",(function(t){return A(Object(l.k)(t))})).attr("y2",M)})).transition(f).attr("x1",(function(t){return A(Object(l.k)(t))})).attr("y1",d(0)).attr("x2",(function(t){return A(Object(l.k)(t))})).attr("y2",(function(t){return d(Object(l.i)(e[t],r,m))}));o.selectAll("*").attr("pointer-events","none"),o.on("mousemove",B).on("touchmove",B).on("mouseout",D).on("touchend",D)}))}),[r,L,u,N,e,a]),Object(i.useEffect)((function(){R.current.forEach((function(t){Object(p.a)(t).selectAll("circle").attr("r",(function(t){return t===Y?4:2}))}))}),[Y]),Object(i.useEffect)((function(){F(A)}),[A]);var J=Object(i.useCallback)((function(t){if(Y){var a=Object(l.i)(null===e||void 0===e?void 0:e[Y],"delta",t);if("total"===r)return a;var n=Object(E.a)(Object(M.a)(Object(l.k)(Y),1),{representation:"date"});return a-Object(l.i)(null===e||void 0===e?void 0:e[n],"delta",t)}}),[e,Y,r]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"TimeSeries"},c.n.map((function(t,a){var n=J(t);return o.a.createElement("div",{key:t,className:f()("svg-parent","is-".concat(t)),ref:C},Y&&o.a.createElement("div",{className:f()("stats","is-".concat(t))},o.a.createElement("h5",{className:"title"},T(Object(l.a)(t))),o.a.createElement("h5",{className:"title"},Object(l.c)(Y,"dd MMMM")),o.a.createElement("div",{className:"stats-bottom"},o.a.createElement("h2",null,Object(l.e)(Object(l.i)(null===e||void 0===e?void 0:e[Y],r,t))),o.a.createElement("h6",null,"".concat(n>=0?"+":"").concat(Object(l.e)(n))))),o.a.createElement("svg",{ref:function(t){R.current[a]=t},preserveAspectRatio:"xMidYMid meet"},o.a.createElement("g",{className:"x-axis"}),o.a.createElement("g",{className:"x-axis2"}),o.a.createElement("g",{className:"y-axis"})))}))))}),(function(t,e){return!!A()(e.chartType,t.chartType)&&(!!A()(e.isUniform,t.isUniform)&&(!!A()(e.isLog,t.isLog)&&(!!A()(e.stateCode,t.stateCode)&&!!A()(e.dates,t.dates))))}))}}]);
//# sourceMappingURL=TimeSeries.3bd3b15c.chunk.js.map